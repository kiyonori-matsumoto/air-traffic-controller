# 今後の実装推奨項目リスト

現状のコードベースと、一般的な航空管制ゲームおよび実際の航空管制業務とのギャップ分析に基づき、追加実装すべき項目をまとめました。

## 1. ゲームとしての不足点 (Game Design)

ゲームとしての面白さ、プレイヤーのモチベーション維持、ユーザビリティの観点からの提案です。

### 1.1 ゲームサイクルとプログレッション
- **スコアリングシステム**:
  - 加点: 正しい手順での着陸誘導、定時到着、ハンドオフ完了。
  - 減点: セパレーション違反、ニアミス、着陸復行（ゴーアラウンド）、遅延。
- **レベル/ステージ制**:
  - 初級: 交通量が少なく、無風。
  - 中級: 交通量増、風の影響あり。
  - 上級: 悪天候、緊急事態（Emergency）、滑走路閉鎖などのイベント発生。
- **チュートリアル**:
  - 操作方法（クリック、コマンド入力）と基本的な管制ルール（セパレーション）を学ぶためのインタラクティブなガイド。

### 1.2 UI/UX の強化
- **マウス操作の拡充**:
  - 現状はコマンド入力/ボタンが主ですが、機体からドラッグ＆ドロップでベクター（進路）を引く操作（多くの管制ゲームで採用されている直感的な操作）の導入。
- **データブロックの整列**:
  - 機体が密集した際にデータタグが重なって読めなくなるのを防ぐ「アンチオーバーラップ」処理（タグの引き出し線表示など）。
- **視覚的フィードバック**:
  - コマンド受領時のパイロットからの応答演出（テキストログ表示や、機体の点滅など）。
  - セパレーション違反時の警告をより派手に（円の色が変わるだけでなく、警告音や画面の点滅）。

### 1.3 演出面 (Juice)
- **オーディオ**:
  - BGM、警告音、パイロットの交信音声（合成音声や「ピロロ」といったSE風ボイス）。
- **ビジュアル**:
  - 航空会社のロゴや機体カラーのバリエーション（現在は単一色）。
  - 雲のレイヤー（機体が雲に入ると見えにくくなるなど）、昼夜のサイクル。

---

## 2. 本物に近づけるための不足点 (Realism)

航空管制シミュレーターとしてのリアリティ、没入感を高めるための提案です。

### 2.1 管制手順と空域構造
- **セクターとハンドオフ**:
  - 現在は単一の空間ですが、本来は「アプローチ（APP）」、「タワー（TWR）」、「グランド（GND）」等の管轄があり、周波数変更と移管（ハンドオフ）の手順が必要です。
- **SID (出発方式) / STAR (標準到着経路) の完全実装**:
  - 現状の簡易的なSTARに加え、高度制限（At/Above/Below）や速度制限が各ウェイポイントに設定され、それを遵守する挙動。
  - 出発機（Departure）の実装。離陸許可、SIDに乗っての上昇。

### 2.2 物理挙動と気象
- **風（Wind）の影響**:
  - 向かい風・追い風による対地速度（Ground Speed）の変化。
  - 横風時の「クラブ（Crab）」アングル（機首を風上に向けて流されるのを防ぐ挙動）。
- **IAS（指示対気速度）と TAS（真対気速度）**:
  - 高度による速度表示の違い（高高度では対地速度が速くなる）。

### 2.3 滑走路運用と安全
- **滑走路離着陸の厳密化**:
  - 「Cleared to Land（着陸許可）」コマンドの実装（現在はILSに乗ると自動着陸）。
  - 「Line up and wait（滑走路に入って待機）」、「Cleared for Takeoff（離陸許可）」。
  - 滑走路上のセパレーション（着陸機がいる間に離陸機を出さないなど）。
  - ゴーアラウンド（着陸復行）ロジック。
- **後方乱気流（Wake Turbulence）**:
  - 現在プロパティとしてはありますが、実際のセパレーション基準に適用されていません。
  - Heavy機の後ろはLight機を通常より離す（5NM → 6NM以上など）ロジックの実装。


### 2.4 情報管理
- **フライトストリップ（運航票）**:
  - 到着予定機、出発予定機の順序を整理するためのストリップ表示（電子ストリップ）。
- **音声交信（Radio Check）**:
  - 「Readback is correct」の概念。プレイヤーの出した指示をパイロットが復唱し、間違っていないか確認するプロセス。

---

## 3. レーダー表示のリアリティ (Radar Display Realism)

実際の管制卓（特に米国のSTARSや日本のARTS/IERSなど）の表示に近づけるための機能群です。

### 3.1 背景地図（Video Maps）
- **複数のマップレイヤー**:
  - 現在は真っ黒な背景ですが、実際には非常に薄い輝度で「海岸線」「主要道路」「鉄道」「河川」などが描画されています。
  - さらに、管制空域の境界線（Sector Boundaries）、進入禁止空域（Restricted Areas）、最低誘導高度（MVA）のエリア境界などが表示されます。
- **レンジリング（距離圏）**:
  - 中心（空港）から5NM、10NM、15NMごとの同心円を表示し、距離感を掴みやすくします。

### 3.2 シンボル（Symbology）の厳密化
- **ターゲットの見分け**:
  - **一次レーダー（Primary Target）**: トランスポンダ応答がない、単なる「点」としての表示（鳥や未確認飛行物体など）。
  - **二次レーダー（Secondary Target）**: 現在実装されているような、高度・識別情報を持つターゲット。
- **ヒストリートレール（History Trail）**:
  - 現在の実装（ドット）は良い線を行っていますが、本物は「レーダーの回転（スキャン）ごとの過去位置」を表示します。通常は5秒ごとの更新で、過去3～5回分を表示します。
- **Jリング / ハロー（Halo）**:
  - 選択した機体の周囲に、設定した半径（例：3NMや5NM）の円を表示する機能。セパレーションの間隔を目視で測る「定規」として使われます。

### 3.3 データブロック（Data Block）の高度化
- **リーダーライン（Leader Line）**:
  - 機体シンボルからデータブロックまでの引き出し線。ターゲットとの重なりを防ぐため、長さや角度を調整できる機能が必要です。
- **ステータス表示**:
  - **所有権（Handoff）状態**: 自席が管制している機体と、他席（他セクター）の機体で色を変える（白＝自席、緑＝他席など）。
  - **緊急コード（Emergency）**: 7700（緊急）、7600（無線故障）などのスコークコード設定時に、データブロック全体が点滅強調表示される機能。
- **速度・高度履歴**:
  - 現在の速度だけでなく、上昇/降下中を表す矢印（↑/↓）や、その変化率（Rate）の表示。

### 3.4 環境情報
- **気象レーダー（Weather Overlay）**:
  - 雨雲の強度（Level 1～6）に応じた領域表示。強い雨雲エリアは避けて誘導する必要があります。
- **SIA（Status Information Area）**:
  - 画面の四隅のいずれかに、現在の空港情報（使用滑走路、風向風速、気圧設定QNH、ATISコード）を常時表示するエリア。
